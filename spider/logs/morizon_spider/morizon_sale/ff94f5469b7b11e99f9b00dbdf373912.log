2019-06-30 23:14:12 [scrapy.utils.log] INFO: Scrapy 1.6.0 started (bot: morizon_spider)
2019-06-30 23:14:12 [scrapy.utils.log] INFO: Versions: lxml 4.3.4.0, libxml2 2.9.9, cssselect 1.0.3, parsel 1.5.1, w3lib 1.20.0, Twisted 19.2.1, Python 3.6.8 (default, Jan 14 2019, 11:02:34) - [GCC 8.0.1 20180414 (experimental) [trunk revision 259383]], pyOpenSSL 19.0.0 (OpenSSL 1.1.1c  28 May 2019), cryptography 2.7, Platform Linux-4.18.0-24-generic-x86_64-with-Ubuntu-18.04-bionic
2019-06-30 23:14:12 [scrapy.crawler] INFO: Overridden settings: {'BOT_NAME': 'morizon_spider', 'FEED_FORMAT': 'csv', 'FEED_URI': 's3://1:1@morizon-data/%(name)s/%(time)s.csv', 'LOG_FILE': 'logs/morizon_spider/morizon_sale/ff94f5469b7b11e99f9b00dbdf373912.log', 'LOG_LEVEL': 'INFO', 'NEWSPIDER_MODULE': 'morizon_spider.spiders', 'SPIDER_MODULES': ['morizon_spider.spiders']}
2019-06-30 23:14:12 [scrapy.extensions.telnet] INFO: Telnet Password: 37c61de917afd101
2019-06-30 23:14:12 [py.warnings] WARNING: /usr/local/lib/python3.6/dist-packages/scrapy/utils/misc.py:144: ScrapyDeprecationWarning: Initialising `scrapy.extensions.feedexport.S3FeedStorage` without AWS keys is deprecated. Please supply credentials or use the `from_crawler()` constructor.
  return objcls(*args, **kwargs)

2019-06-30 23:14:13 [scrapy.middleware] INFO: Enabled extensions:
['scrapy.extensions.corestats.CoreStats',
 'scrapy.extensions.telnet.TelnetConsole',
 'scrapy.extensions.memusage.MemoryUsage',
 'scrapy.extensions.feedexport.FeedExporter',
 'scrapy.extensions.logstats.LogStats']
2019-06-30 23:14:13 [morizon_spider.date_utils] INFO: Found previous scraping date file...
2019-06-30 23:14:13 [morizon_spider.date_utils] INFO: 2018-01-01
2019-06-30 23:14:13 [morizon_spider.date_utils] INFO: Loaded previous scraping date from previous_scraping_dates.txt
2019-06-30 23:14:13 [morizon_spider.date_utils] INFO: Added 2019-06-29 as previous scraping date
2019-06-30 23:14:13 [morizon_spider.date_utils] INFO: Updated previous_scraping_dates.txt
2019-06-30 23:14:13 [morizon_sale] INFO: Setting start_date to 2018-01-01...
2019-06-30 23:14:13 [morizon_sale] INFO: Setting end_date to 2019-06-29...
2019-06-30 23:14:13 [morizon_sale] INFO: Date diff = 544 days
2019-06-30 23:14:13 [morizon_sale] INFO: Setting date_filter string to ""
2019-06-30 23:14:13 [scrapy.middleware] INFO: Enabled downloader middlewares:
['scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware',
 'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware',
 'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware',
 'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware',
 'scrapy.downloadermiddlewares.retry.RetryMiddleware',
 'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware',
 'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware',
 'scrapy.downloadermiddlewares.redirect.RedirectMiddleware',
 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware',
 'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware',
 'scrapy.downloadermiddlewares.stats.DownloaderStats']
2019-06-30 23:14:13 [scrapy.middleware] INFO: Enabled spider middlewares:
['scrapy.spidermiddlewares.httperror.HttpErrorMiddleware',
 'scrapy.spidermiddlewares.offsite.OffsiteMiddleware',
 'scrapy.spidermiddlewares.referer.RefererMiddleware',
 'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware',
 'scrapy.spidermiddlewares.depth.DepthMiddleware']
2019-06-30 23:14:13 [scrapy.middleware] INFO: Enabled item pipelines:
['morizon_spider.pipelines.MorizonSpiderPipeline']
2019-06-30 23:14:13 [scrapy.core.engine] INFO: Spider opened
2019-06-30 23:14:13 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2019-06-30 23:14:13 [scrapy.extensions.telnet] INFO: Telnet console listening on 127.0.0.1:6023
2019-06-30 23:14:14 [morizon_sale] INFO: Currenly scraping offers in 20000-40000 zł price range
2019-06-30 23:14:14 [morizon_sale] INFO: Items scraped: None
2019-06-30 23:15:13 [scrapy.extensions.logstats] INFO: Crawled 21 pages (at 21 pages/min), scraped 19 items (at 19 items/min)
2019-06-30 23:16:13 [scrapy.extensions.logstats] INFO: Crawled 23 pages (at 2 pages/min), scraped 21 items (at 2 items/min)
2019-06-30 23:17:13 [scrapy.extensions.logstats] INFO: Crawled 24 pages (at 1 pages/min), scraped 22 items (at 1 items/min)
2019-06-30 23:17:37 [morizon_sale] INFO: Currenly scraping offers in 40000-60000 zł price range
2019-06-30 23:17:37 [morizon_sale] INFO: Items scraped: 25
2019-06-30 23:18:13 [scrapy.extensions.logstats] INFO: Crawled 30 pages (at 6 pages/min), scraped 27 items (at 5 items/min)
2019-06-30 23:19:13 [scrapy.extensions.logstats] INFO: Crawled 53 pages (at 23 pages/min), scraped 48 items (at 21 items/min)
2019-06-30 23:19:26 [scrapy.crawler] INFO: Received SIGINT, shutting down gracefully. Send again to force 
2019-06-30 23:19:26 [scrapy.core.engine] INFO: Closing spider (shutdown)
2019-06-30 23:20:13 [scrapy.extensions.logstats] INFO: Crawled 66 pages (at 13 pages/min), scraped 60 items (at 12 items/min)
2019-06-30 23:21:13 [scrapy.extensions.logstats] INFO: Crawled 69 pages (at 3 pages/min), scraped 63 items (at 3 items/min)
2019-06-30 23:22:13 [scrapy.extensions.logstats] INFO: Crawled 69 pages (at 0 pages/min), scraped 63 items (at 0 items/min)
2019-06-30 23:23:09 [scrapy.extensions.feedexport] ERROR: Error storing csv feed (65 items) in: s3://1:1@morizon-data/morizon_sale/2019-06-30T21-14-13.csv
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/dist-packages/twisted/python/threadpool.py", line 250, in inContext
    result = inContext.theWork()
  File "/usr/local/lib/python3.6/dist-packages/twisted/python/threadpool.py", line 266, in <lambda>
    inContext.theWork = lambda: context.call(ctx, func, *args, **kw)
  File "/usr/local/lib/python3.6/dist-packages/twisted/python/context.py", line 122, in callWithContext
    return self.currentContext().callWithContext(ctx, func, *args, **kw)
  File "/usr/local/lib/python3.6/dist-packages/twisted/python/context.py", line 85, in callWithContext
    return func(*args,**kw)
  File "/usr/local/lib/python3.6/dist-packages/scrapy/extensions/feedexport.py", line 140, in _store_in_thread
    Bucket=self.bucketname, Key=self.keyname, Body=file)
  File "/usr/local/lib/python3.6/dist-packages/botocore/client.py", line 357, in _api_call
    return self._make_api_call(operation_name, kwargs)
  File "/usr/local/lib/python3.6/dist-packages/botocore/client.py", line 661, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (InvalidAccessKeyId) when calling the PutObject operation: The AWS Access Key Id you provided does not exist in our records.
2019-06-30 23:23:09 [scrapy.statscollectors] INFO: Dumping Scrapy stats:
{'downloader/exception_count': 4,
 'downloader/exception_type_count/twisted.internet.error.TimeoutError': 3,
 'downloader/exception_type_count/twisted.web._newclient.ResponseNeverReceived': 1,
 'downloader/request_bytes': 35342,
 'downloader/request_count': 75,
 'downloader/request_method_count/GET': 75,
 'downloader/response_bytes': 2211448,
 'downloader/response_count': 71,
 'downloader/response_status_count/200': 71,
 'dupefilter/filtered': 10,
 'finish_reason': 'shutdown',
 'finish_time': datetime.datetime(2019, 6, 30, 21, 22, 59, 676422),
 'item_scraped_count': 65,
 'log_count/ERROR': 1,
 'log_count/INFO': 31,
 'log_count/WARNING': 1,
 'memusage/max': 109109248,
 'memusage/startup': 72192000,
 'request_depth_max': 6,
 'response_received_count': 71,
 'retry/count': 4,
 'retry/reason_count/twisted.internet.error.TimeoutError': 3,
 'retry/reason_count/twisted.web._newclient.ResponseNeverReceived': 1,
 'scheduler/dequeued': 75,
 'scheduler/dequeued/memory': 75,
 'scheduler/enqueued': 168,
 'scheduler/enqueued/memory': 168,
 'start_time': datetime.datetime(2019, 6, 30, 21, 14, 13, 137654)}
2019-06-30 23:23:09 [scrapy.core.engine] INFO: Spider closed (shutdown)
